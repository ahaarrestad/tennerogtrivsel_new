---
import { Image } from 'astro:assets';
import tannleger from '../content/tannleger.json';
import WaveToFooter from './WaveToFooter.astro';
import { getSiteSettings } from '../scripts/getSettings';

// For å dynamisk importere bilder i Astro
const images = import.meta.glob('/src/assets/tannleger/*.{jpeg,jpg,png,webp}');
const settings = await getSiteSettings();
---
<section id="tannleger" class="scroll-mt-6 relative bg-slate-50 py-24 md:pb-32">
    <div class="container mx-auto px-4 md:flex-row items-center gap-12">
        <div class="text-center mb-16">
            <h2 class="text-3xl font-bold text-slate-900 italic tracking-tight">Våre Tannleger</h2>
            <p class="text-slate-600">{settings.tannlegerTekst}</p>
            <div class="w-20 h-1 bg-blue-600 mx-auto mt-4"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
            {tannleger.map((t) => {
                const imagePath = `/src/assets/tannleger/${t.bildeFil}`;
                const hasImage = images[imagePath];

                return (
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex flex-col items-center">
                            <div class="w-48 h-48 mb-6 overflow-hidden rounded-full border-4 border-blue-50">
                                {hasImage ? (
                                        <Image
                                                src={images[imagePath]()}
                                                alt={t.navn}
                                                width={400}
                                                height={400}
                                                class="w-full h-full object-cover"
                                        />
                                ) : (
                                        <div class="w-full h-full bg-gray-200 flex items-center justify-center text-gray-400">
                                            Bilde mangler
                                        </div>
                                )}
                            </div>
                            <h3 class="text-xl font-bold text-slate-900">{t.navn}</h3>
                            <p class="text-blue-600 font-medium mb-4">{t.tittel}</p>
                            <p class="text-slate-600 text-center text-sm">{t.beskrivelse}</p>
                        </div>
                );
            })}
        </div>

<!--
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-7xl mx-auto">
            {tannleger.map((d) => (
                    <div class="bg-white rounded-2xl shadow-sm border border-slate-100 hover:border-blue-200 transition-all overflow-hidden w-full max-w-7xl mx-auto mb-8">
                        <div class="flex flex-col md:flex-row">

                            <div class="w-full md:w-[40%] lg:w-[35%] flex-shrink-0 relative min-h-[300px] md:min-h-[350px] min-w-[200px] mx:min-w-[250px]">
                                <img
                                        src={d.image}
                                        alt={d.name}
                                        class="absolute inset-0 w-full h-full object-cover object-center"
                                />
                                <div class="absolute inset-0 bg-gradient-to-t from-blue-900/20 to-transparent"></div>
                            </div>

                            <div class="p-8 md:p-12 flex flex-col justify-center flex-1 bg-white justify-start">
                                <div class="mb-6">
                                    <h3 class="text-3xl font-extrabold text-slate-900 mb-1">{d.name}</h3>
                                    <p class="text-lg text-slate-500 font-medium italic">{d.role}</p>
                                </div>

                                <div class="h-1 w-20 bg-blue-600 rounded-full mb-6"></div>

                                <p class="text-slate-600 leading-relaxed text-base md:text-lg">
                                    {d.bio}
                                </p>

                            </div>
                        </div>
                    </div>
            ))}
        </div>
-->
    </div>
</section>