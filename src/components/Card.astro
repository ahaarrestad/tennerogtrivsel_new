---
// src/components/Card.astro
const {
    index,
    title,
    href = null,    // Settes til null som standard
    headerOffset = "200px",
    minHeight = "auto",
    centered = true,
    isStack = true,
    image = false,
    external = false // added external prop to determine if the link should open in a new tab
} = Astro.props;

// Her bestemmer vi om vi skal bruke 'a' eller 'div'
const Tag = href ? 'a' : 'div';
---

<Tag
        href={href}
        target={external ? "_blank" : undefined}
        rel={external ? "noopener noreferrer" : undefined}
        style={`${isStack ? `--card-index: ${index}; --header-offset: ${headerOffset};` : ''} min-height: ${minHeight};`}
        class:list={[
            "card-base group no-underline text-inherit flex flex-col w-full", // Flex er nå alltid på
            href ? "cursor-pointer" : "",
            isStack ? "stack-card" : "relative h-full",
            centered ? "items-center text-center justify-center" : "items-start text-left"
        ]}
>
    <div class="card-accent-corner"></div>

    <div class:list={[
        "relative z-10 mb-6 empty:hidden",
        image ? "w-48 h-48 mx-auto" : "w-full"
    ]}>
        {/* Den blå ramma er fjernet herfra */}

        <div class:list={[
            "relative overflow-hidden z-10 h-full w-full",
            image ? "rounded-2xl border-4 border-white shadow-md" : "rounded-2xl"
        ]}>
            <slot name="image" />
        </div>
    </div>

    <div class:list={[
        "text-brand mb-6 relative z-10 empty:hidden",
        centered ? "flex justify-center" : ""
    ]}>
        <slot name="icon"/>
    </div>

    <div class="relative z-10 w-full flex flex-col grow">
        <h3 class:list={[
            "h3 mb-1 transition-colors",
            href ? "group-hover:text-brand-hover" : ""
        ]}>
            {title}
        </h3>

        <div class="card-text space-y-1 grow">
            <slot />
        </div>

        {href && (
                <div class="mt-6">
                    <slot name="link">
                        <div class="card-link">
                            Les mer <span class="ml-2 transition-transform group-hover:translate-x-1 inline-block">→</span>
                        </div>
                    </slot>
                </div>
        )}
    </div>

    <div class="card-progress-bar"></div>
</Tag>