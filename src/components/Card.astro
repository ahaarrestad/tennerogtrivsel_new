---
// src/components/Card.astro
const {
    index,
    title,
    subtitle,
    href = null,    // Settes til null som standard
    headerOffset = "200px",
    minHeight = "auto",
    centered = true,
    isStack = true,
    roundImage = false
} = Astro.props;

// Her bestemmer vi om vi skal bruke 'a' eller 'div'
const Tag = href ? 'a' : 'div';
---

<Tag
        href={href}
        style={`${isStack ? `--card-index: ${index}; --header-offset: ${headerOffset};` : ''} min-height: ${minHeight};`}
        class:list={[
            "card-base group no-underline text-inherit",
            href ? "block cursor-pointer" : "flex flex-col", // block er viktig for at <a> skal fylle hele bredden
        isStack ? "stack-card" : "relative h-full flex flex-col",
            centered ? "items-center text-center" : "items-start text-left"
        ]}
>
    <div class="card-accent-corner"></div>

    <div class:list={[
        "relative z-10 mb-6 empty:hidden",
        roundImage ? "w-48 h-48 mx-auto" : "w-full"
    ]}>
        {roundImage && (
                <div class="absolute inset-0 bg-blue-100 rounded-full scale-110 -rotate-6 group-hover:rotate-0 transition-transform duration-500"></div>
        )}
        <div class:list={[
            "relative overflow-hidden z-10 h-full w-full",
            roundImage ? "rounded-full border-4 border-white shadow-lg" : "rounded-2xl"
        ]}>
            <slot name="image" />
        </div>
    </div>

    <div class="text-blue-600 mb-6 relative z-10 empty:hidden">
        <slot name="icon" />
    </div>

    <div class="relative z-10 w-full flex flex-col flex-grow">
        <h3 class:list={[
            "card-title text-xl !mb-1 transition-colors",
            href ? "group-hover:text-blue-600" : ""
        ]}>
            {title}
        </h3>

        {subtitle && <p class="card-subtitle !mb-4">{subtitle}</p>}

        <div class="card-text space-y-1 flex-grow">
            <slot />
        </div>

        {href && (
                <div class="mt-6">
                    <slot name="link">
                        <div class="card-link">
                            Les mer <span class="ml-2 transition-transform group-hover:translate-x-1 inline-block">â†’</span>
                        </div>
                    </slot>
                </div>
        )}
    </div>

    <div class="card-progress-bar"></div>
</Tag>