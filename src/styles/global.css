@import "tailwindcss";

/* Legg til denne linjen for å aktivere typography i v4 */
@plugin "@tailwindcss/typography";

@theme {
    /* Dette lager klassen 'text-brand' og 'bg-brand' */
    --color-brand: var(--color-slate-800);
    --color-brand-dark: var(--color-slate-800);
    --color-brand-hover: var(--color-slate-500);
    --color-brand-active: var(--color-slate-100);
    --color-brand-border: var(--color-slate-100);
    --color-brand-light: var(--color-slate-50);
    --color-brand-message-box: var(--color-slate-300);
    --color-brand-message-banner: var(--color-slate-400);

    /* SPACING TOKENS */
    --spacing-section-py: calc(var(--spacing) * 16);
    --spacing-section-py-md: calc(var(--spacing) * 24);
    --spacing-header-mb: calc(var(--spacing) * 16);
    --spacing-header-mb-md: calc(var(--spacing) * 48);
}

@layer components {
    /* TYPOGRAFI BASE-KLASSER */
    /* Kun stil, ingen marginer eller layout */
    .h1 {
        @apply text-4xl md:text-6xl font-black text-brand tracking-tight leading-tight;
    }

    .h2 {
        @apply text-3xl md:text-5xl font-black text-brand tracking-tight leading-tight;
    }

    .h3 {
        @apply text-2xl md:text-3xl font-bold text-brand leading-snug;
    }

    .h4 {
        @apply text-lg font-bold text-brand uppercase tracking-wide;
    }

    .brand-text {
        color: var(--color-brand);
    }

    /* SEKSJONS-LAYOUT */
    .layout-container {
        @apply container mx-auto px-4;
    }

    .section-container {
        --section-py: var(--spacing-section-py);
        padding-top: var(--section-py);
        padding-bottom: var(--section-py);
        @apply scroll-mt-6 relative;
    }

    @media (min-width: 768px) {
        .section-container {
            --section-py: var(--spacing-section-py-md);
        }
    }

    .section-content {
        @apply container mx-auto px-4;
    }

    /* Beholder disse for bakoverkompatibilitet, men fjerner tvungen layout */
    .section-header {
        margin-bottom: var(--spacing-header-mb);
    }

    @media (min-width: 768px) {
        .section-header {
            margin-bottom: var(--spacing-header-mb-md);
        }
    }

    .section-header-centered {
        @apply text-center mx-auto max-w-4xl;
    }

    .section-heading {
        @apply text-3xl md:text-5xl font-black text-brand tracking-tight leading-tight;
    }

    .section-intro {
        @apply text-slate-600 max-w-2xl mx-auto mt-2 text-base md:text-lg leading-relaxed;
    }

    .heading-accent {
        @apply w-20 h-1 bg-brand-dark mx-auto mt-4;
    }

    /* Denne klassen gjør headeren sticky kun på mobil */
    .section-header-sticky {
        /* Posisjonering: Sticky på mobil for å beholde kontekst, statisk på desktop */
        @apply sticky md:relative z-30;

        /* Avstand: Legger på vertikal padding på mobil for luft, fjerner den på desktop */
        @apply py-4 md:py-0;

        /* Sticky-plassering: Dynamisk høyde basert på navbar (faller tilbake til 4rem) */
        top: var(--nav-total-height, 4rem);

        /* Lagdeling: Arver bakgrunnsfarge fra forelderen for å dekke over elementer som scrolles bak */
        background-color: inherit;
    }

    /* FELLES KORT-LOGIKK */
    .stack-card {
        @apply sticky md:relative transition-all duration-300 overflow-hidden;
        /* Standardverdier for desktop */
        top: 0;
        z-index: 1;
    }

    @media (max-width: 767px) {
        .stack-card {
            position: sticky !important;
            /* Vi bruker en variabel --header-offset som vi kan justere per side hvis nødvendig */
            top: calc(var(--nav-total-height, 4rem) + var(--header-offset, 150px) + (var(--card-index) * 4px)) !important;
            z-index: var(--card-index);
            margin-bottom: 10vh !important;
        }

        .stack-card:last-child {
            margin-bottom: 2rem !important;
        }
    }

    @media (min-width: 768px) {
        .stack-card {
            position: relative !important;
            top: 0 !important;
            z-index: 1 !important;
            margin-bottom: 0 !important;
        }
    }

    /* FELLES DESIGN FOR ALLE KORT */
    .card-base {
        /* Grunnleggende utseende: Hvit bakgrunn, mye luft (p-8) og avrundede hjørner */
        @apply bg-white p-8 rounded-3xl;

        /* Ramme og dybde: En tynn kantlinje og en subtil skygge */
        @apply border border-brand-border shadow-sm;

        /* Layout: Flex-kolonne sørger for at innholdet stables vertikalt */
        /* Overflow-hidden er viktig for at 'card-progress-bar' ikke skal stikke ut */
        @apply flex flex-col relative overflow-hidden;

        /* Interaksjon: Definerer farten på alle hover-effekter (skygge, farge, etc.) */
        @apply transition-all duration-300;
    }

    /* Den blå sirkel-detaljen i hjørnet (valgfri å bruke) */
    .card-accent-corner {
        /* Posisjonering: Låst til øverste høyre hjørne */
        @apply absolute top-0 right-0;

        /* Form og størrelse: Lager en stor boks med full avrunding nede til venstre (kvart sirkel) */
        @apply w-20 h-20 rounded-bl-full;

        /* Plassering: Drar sirkelen ut av kortets ramme (-8) for en subtil "cut-off" effekt */
        @apply -mr-8 -mt-8;

        /* Utseende: Lys grå farge som standard, og klargjort for fargebytte ved hover */
        @apply bg-slate-200 transition-colors;
    }

    /* Progress-linjen som animeres i bunnen ved hover på kortet */
    .card-progress-bar {
        /* Posisjonering: Ligger helt i bunn og dekker hele bredden (når w er full) */
        @apply absolute bottom-0 left-0 h-1.5;

        /* Utseende: Bruker mørk merkevarefarge, starter med 0 bredde */
        @apply bg-brand-dark w-0;

        /* Animasjon: Jevn overgang når bredden endres (styres av hover i global.css) */
        @apply transition-all duration-500;

        /* Responsivitet: Skjult på mobil, vises kun fra 768px (md) og oppover */
        @apply hidden md:block;
    }

    /* Interaksjon: Animerer fremdriftslinjen i bunnen når kortet hovres */
    .card-base:hover .card-progress-bar {
        /* Ekspanderer linjen fra 0 til 100% bredde */
        @apply w-full;
    }

    /* Interaksjon: Endrer farge på hjørne-detaljen når hele kortet blir hovret */
    .card-base:hover .card-accent-corner {
        /* Skifter til en mørkere/aktiv merkevarefarge ved hover */
        @apply bg-brand-active;
    }

    /* Tittel inni kortet */
    .card-title {
        @apply text-2xl font-bold text-brand mb-2 transition-colors relative z-10;
    }

    /* Undertittel (f.eks. tittel for tannleger eller merkelapper) */
    .card-subtitle {
        @apply text-lg text-brand font-semibold italic mb-4 relative z-10;
    }

    /* Brødtekst / beskrivelse i kortet */
    .card-text {
        @apply text-slate-600 text-sm md:text-base leading-relaxed relative z-10;
    }

    /* Spesifikk styling for "Les mer" eller smådetaljer */
    .card-link {
        @apply mt-auto pt-6 flex items-center text-slate-600 font-bold text-xs uppercase tracking-widest relative z-10;
    }

    /* Blå knapp (Primær) */
    .btn-primary {
        /* Layout: Sørger for at tekst og ikoner står på linje og har riktig luft */
        @apply inline-flex items-center justify-center gap-2;

        /* Form og størrelse: Definerer avrunding, padding og at knappen ikke skal knekke tekst */
        @apply px-6 py-3.5 rounded-2xl whitespace-nowrap min-w-fit;

        /* Typografi og kantlinjer: Setter skrifttype og den tynne rammen rundt */
        @apply border border-brand text-brand font-bold;

        /* Effekt og Lagdeling: Skygge og z-index for å ligge over andre elementer */
        @apply shadow-lg relative z-10;

        /* Animasjon: Definerer farten på alle overganger (farge, posisjon, skygge) */
        @apply transition-all duration-300;

        /* Hover-tilstand: Endrer bakgrunn, flytter knappen litt opp og øker skyggen */
        @apply hover:text-brand hover:bg-brand-active hover:shadow-xl hover:-translate-y-0.5;
    }

    /* Samkjøring av Markdown-innhold */
    .markdown-content.prose {
        /* Typografi: Linjeavstand for bedre lesbarhet. Farge arves fra forelder eller settes av p/ul */
        @apply leading-relaxed;

        /* Layout-overstyring: Sørger for at innholdet fyller hele bredden av containeren */
        max-width: none !important;
    }

    /* Vi tvinger paragrafene til å matche .section-intro sin størrelse (base/lg) */
    .markdown-content.prose p {
        @apply text-base md:text-lg leading-relaxed mb-6;
        color: inherit;
        margin-top: 0 !important;
    }

    /* Overskrifter inni Markdown */
    .markdown-content.prose h2,
    .markdown-content.prose h3 {
        @apply text-brand font-bold mt-12 mb-4 tracking-tight;
    }

    .markdown-content.prose h2 { @apply text-2xl md:text-3xl; }
    .markdown-content.prose h3 { @apply text-xl; }

    .markdown-content.prose strong {
        @apply text-brand font-bold;
    }

    .markdown-content.prose ul {
        @apply list-disc list-inside ml-1 space-y-2 mb-6;
        color: inherit;
    }

    .markdown-content.prose li {
        /* Sørger for at hvert element faktisk oppfører seg som et listeelement */
        display: list-item;
        @apply pl-1;
        color: inherit;
    }

    /* Sørger for at kulepunktene (markers) har nøyaktig samme farge som teksten */
    .markdown-content.prose li::marker {
        color: inherit !important;
    }
    
    /* Hvis det er en numerisk liste */
    .markdown-content.prose ol {
        @apply list-decimal list-inside ml-1 space-y-2 mb-6;
        color: inherit;
    }

    /* HAMBURGER MENY ANIMASJON */
    #menu-btn span {
        @apply transition-all duration-300 ease-in-out origin-center;
    }

    #menu-btn[data-state="open"] span:nth-child(1) {
        @apply translate-y-[8px] rotate-45;
    }

    #menu-btn[data-state="open"] span:nth-child(2) {
        @apply opacity-0 scale-x-0;
    }

    #menu-btn[data-state="open"] span:nth-child(3) {
        @apply -translate-y-[8px] -rotate-45;
    }

    /* ADMIN INTERFACE STYLES */
    .admin-layout {
        @apply h-full flex flex-col bg-slate-50 text-brand;
    }

    .admin-nav {
        @apply bg-white border-b border-brand-border sticky top-0 z-[100] h-20 flex items-center;
    }

    .admin-nav-container {
        @apply container mx-auto px-4 flex justify-between items-center gap-4;
    }

    .admin-logo-container {
        @apply flex items-center gap-2 sm:gap-3 no-underline shrink min-w-0;
    }

    .admin-user-pill {
        @apply bg-slate-100 hover:bg-slate-200 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full border border-slate-200 transition-colors flex items-center gap-2 shrink-0;
    }

    .admin-login-box {
        @apply bg-white p-10 rounded-3xl shadow-xl border border-brand-border max-w-md w-full text-center space-y-8;
    }

    .admin-login-icon-box {
        @apply w-20 h-20 bg-brand-light rounded-2xl flex items-center justify-center mx-auto mb-6;
    }

    .admin-dashboard-container {
        @apply container mx-auto px-4 space-y-12 py-12 w-full;
    }

    .admin-module-grid {
        @apply grid grid-cols-1 md:grid-cols-2 gap-8;
    }

    .admin-card {
        @apply bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-brand-border transition-all duration-300;
    }

    .admin-card-interactive {
        @apply bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-brand-border transition-all duration-300 hover:shadow-md hover:border-brand-active flex flex-col;
    }

    .admin-card-header {
        @apply bg-white p-6 sm:p-8 rounded-3xl shadow-sm border border-brand-border transition-all duration-300 text-center;
    }

    /* TYPOGRAPHY */
    .admin-title {
        @apply text-3xl md:text-5xl font-black text-brand tracking-tight leading-tight uppercase;
    }

    .admin-subtitle {
        @apply text-2xl md:text-3xl font-bold text-brand leading-snug mb-4 transition-colors;
    }

    .admin-description {
        @apply text-slate-600 mb-6 grow;
    }

    .admin-info-text {
        @apply text-slate-600 italic mt-2 text-sm sm:text-base;
    }

    .admin-status-pill {
        @apply text-[9px] uppercase px-2 py-0.5 rounded-full border flex items-center gap-1.5;
    }

    .admin-status-dot {
        @apply w-2 h-2 rounded-full;
    }

    .admin-status-dot-active { @apply bg-green-500 animate-pulse; }
    .admin-status-dot-expired { @apply bg-slate-300; }
    .admin-status-dot-planned { @apply bg-blue-500; }

    .admin-label {
        @apply font-bold text-brand text-xs uppercase tracking-wider block mb-2;
    }

    .admin-input {
        @apply w-full p-3 rounded-xl border border-slate-200 outline-none focus:border-brand focus:ring-4 focus:ring-brand/5 transition-all text-sm;
    }

    .admin-field-container {
        @apply flex flex-col gap-1.5 p-4 sm:p-5 rounded-2xl border border-brand-light bg-white hover:border-brand-active transition-colors;
    }

    .admin-alert-error {
        @apply text-red-500 font-bold p-4 bg-red-50 rounded-2xl;
    }

    .admin-btn-secondary {
        @apply bg-slate-50 hover:bg-brand hover:text-white border border-slate-200 text-brand text-xs font-bold py-2 px-4 rounded-xl transition-colors;
    }

    .admin-btn-danger {
        @apply bg-white hover:bg-red-50 border border-red-100 text-red-500 text-xs font-bold py-2 px-4 rounded-xl transition-colors;
    }
}
